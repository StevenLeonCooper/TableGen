/*!
* mustache.js - Logic-less {{mustache}} templates with JavaScript
* http://github.com/janl/mustache.js
*/
var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function a(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var o=RegExp.prototype.test;var r=/\S/;function s(t){return!function(t,e){return o.call(t,e)}(r,t)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,u=/\s+/,d=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function g(t){this.string=t,this.tail=t,this.pos=0}function f(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function m(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},f.prototype.push=function(t){return new f(t,this)},f.prototype.lookup=function(t){var e,a,o,r=this.cache;if(r.hasOwnProperty(t))e=r[t];else{for(var s,l,c,u=this,d=!1;u;){if(t.indexOf(".")>0)for(s=u.view,l=t.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(d=i(s,l[c])||(a=s,o=l[c],null!=a&&"object"!=typeof a&&a.hasOwnProperty&&a.hasOwnProperty(o))),s=s[l[c++]];else s=u.view[t],d=i(u.view,t);if(d){e=s;break}u=u.parent}r[t]=e}return n(e)&&(e=e.call(this.view)),e},m.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},m.prototype.parse=function(t,n){var i=this.templateCache,o=t+":"+(n||v.tags).join(":"),r=void 0!==i,l=r?i.get(o):void 0;return null==l&&(l=function(t,n){if(!t)return[];var i,o,r,l=!1,f=[],m=[],y=[],b=!1,w=!1,T="",k=0;function C(){if(b&&!w)for(;y.length;)delete m[y.pop()];else y=[];b=!1,w=!1}function x(t){if("string"==typeof t&&(t=t.split(u,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(a(t[0])+"\\s*"),o=new RegExp("\\s*"+a(t[1])),r=new RegExp("\\s*"+a("}"+t[1]))}x(n||v.tags);for(var $,H,_,S,I,E,M=new g(t);!M.eos();){if($=M.pos,_=M.scanUntil(i))for(var j=0,O=_.length;j<O;++j)s(S=_.charAt(j))?(y.push(m.length),T+=S):(w=!0,l=!0,T+=" "),m.push(["text",S,$,$+1]),$+=1,"\n"===S&&(C(),T="",k=0,l=!1);if(!M.scan(i))break;if(b=!0,H=M.scan(h)||"name",M.scan(c),"="===H?(_=M.scanUntil(d),M.scan(d),M.scanUntil(o)):"{"===H?(_=M.scanUntil(r),M.scan(p),M.scanUntil(o),H="&"):_=M.scanUntil(o),!M.scan(o))throw new Error("Unclosed tag at "+M.pos);if(I=">"==H?[H,_,$,M.pos,T,k,l]:[H,_,$,M.pos],k++,m.push(I),"#"===H||"^"===H)f.push(I);else if("/"===H){if(!(E=f.pop()))throw new Error('Unopened section "'+_+'" at '+$);if(E[1]!==_)throw new Error('Unclosed section "'+E[1]+'" at '+$)}else"name"===H||"{"===H||"&"===H?w=!0:"="===H&&x(_)}if(C(),E=f.pop())throw new Error('Unclosed section "'+E[1]+'" at '+M.pos);return function(t){for(var e,n=[],a=n,i=[],o=0,r=t.length;o<r;++o)switch((e=t[o])[0]){case"#":case"^":a.push(e),i.push(e),a=e[4]=[];break;case"/":i.pop()[5]=e[2],a=i.length>0?i[i.length-1][4]:n;break;default:a.push(e)}return n}(function(t){for(var e,n,a=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(a.push(e),n=e));return a}(m))}(t,n),r&&i.set(o,l)),l},m.prototype.render=function(t,e,n,a){var i=this.getConfigTags(a),o=this.parse(t,i),r=e instanceof f?e:new f(e,void 0);return this.renderTokens(o,r,n,t,a)},m.prototype.renderTokens=function(t,e,n,a,i){for(var o,r,s,l="",c=0,u=t.length;c<u;++c)s=void 0,"#"===(r=(o=t[c])[0])?s=this.renderSection(o,e,n,a,i):"^"===r?s=this.renderInverted(o,e,n,a,i):">"===r?s=this.renderPartial(o,e,n,i):"&"===r?s=this.unescapedValue(o,e):"name"===r?s=this.escapedValue(o,e,i):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(l+=s);return l},m.prototype.renderSection=function(t,a,i,o,r){var s=this,l="",c=a.lookup(t[1]);if(c){if(e(c))for(var u=0,d=c.length;u<d;++u)l+=this.renderTokens(t[4],a.push(c[u]),i,o,r);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)l+=this.renderTokens(t[4],a.push(c),i,o,r);else if(n(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(a.view,o.slice(t[3],t[5]),(function(t){return s.render(t,a,i,r)})))&&(l+=c)}else l+=this.renderTokens(t[4],a,i,o,r);return l}},m.prototype.renderInverted=function(t,n,a,i,o){var r=n.lookup(t[1]);if(!r||e(r)&&0===r.length)return this.renderTokens(t[4],n,a,i,o)},m.prototype.indentPartial=function(t,e,n){for(var a=e.replace(/[^ \t]/g,""),i=t.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=a+i[o]);return i.join("\n")},m.prototype.renderPartial=function(t,e,a,i){if(a){var o=this.getConfigTags(i),r=n(a)?a(t[1]):a[t[1]];if(null!=r){var s=t[6],l=t[5],c=t[4],u=r;0==l&&c&&(u=this.indentPartial(r,c,s));var d=this.parse(u,o);return this.renderTokens(d,e,a,u,i)}}},m.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},m.prototype.escapedValue=function(t,e,n){var a=this.getConfigEscape(n)||v.escape,i=e.lookup(t[1]);if(null!=i)return"number"==typeof i&&a===v.escape?String(i):a(i)},m.prototype.rawValue=function(t){return t[1]},m.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"==typeof t?t.tags:void 0},m.prototype.getConfigEscape=function(t){return t&&"object"==typeof t&&!e(t)?t.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){y.templateCache=t},get templateCache(){return y.templateCache}},y=new m;v.clearCache=function(){return y.clearCache()},v.parse=function(t,e){return y.parse(t,e)},v.render=function(t,n,a,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+((e(o=t)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)'));var o;return y.render(t,n,a,i)},v.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return l[t]}))},v.Scanner=g,v.Context=f,v.Writer=m;const b={};b.get={innerHTML:t=>t.innerHTML,textContent:t=>t.textContent,value:t=>t.value,template:t=>{let e=`[data-for='${t.id||t.name}']`,n=document.querySelector(e).innerHTML;return v.render(n,pageContext)}},b.set={innerHTML:(t,e)=>(t.innerHTML=e,`target HTML is now ${e}`),textContent:(t,e)=>(t.textContent=e,`target text is now ${e}`),value:(t,e)=>(t.value=e,`target value is now ${e}`)},b.add={innerHTML:(t,e)=>{t.innerHTML=t.innerHTML+e},textContent:(t,e)=>{t.textContent=t.textContent+e},value:(t,e)=>{t.value=t.value+e}};const w=()=>{var t;null===(t=document.getElementById("ModalWrapper"))||void 0===t||t.remove()};b.modal=t=>{T.click.closeModal=T.click.closeModal||w;let e=`<div data-click="closeModal" id="ModalContent">${t}</div>`,n=document.createElement("div");n.id="ModalWrapper",n.dataset.click="closeModal",n.innerHTML=e,document.body.appendChild(n)},b.alert=t=>{let e=`<h1>Alert</h1><hr><div id="Alert">${t}<hr><button data-click="closeModal">Okay</button></div>`;b.modal(e)},b.warning=t=>{let e=`<h1>Warning</h1><hr><div id="Warning">${t}<hr><button data-click="closeModal">Okay</button></div>`;return b.modal(e),!1},b.confirm=(t,e,n)=>{let a=`<h1>Confirm</h1><hr>\n                    <div id="Confirm">${t}<hr>\n                    <button data-click="confirmYes">Yes</button>\n                    <button data-click="confirmNo">No</button>\n                    </div>`;T.click.confirmYes=()=>{w(),null==e||e()},T.click.confirmNo=()=>{w(),null==n||n()},b.modal(a)},b.textInput=t=>{T.click.processTextInput=e=>{let n=document.getElementById("TextInput").value;w(),t.call(e.target,n)},b.modal('<h2>Input Text</h2>\n                    <textarea id="TextInput" class="modal-input">Copy/Paste Here</textarea>\n                    <hr>\n                    <button data-click="processTextInput">Continue</button>\n                    ')};const T={click:{},change:{},keyup:{},actions:{}};T.click.addToPage=()=>{if(!mainTable.isValid)return b.warning(mainTable.validationError),!1;let t={detail:mainTable.htmlOutput};const e=new CustomEvent("gadget_insert",t);document.body.dispatchEvent(e)},T.actions.importHtml=t=>{if(!mainTable.import(t))return b.warning("Could Not Find Table in Imported HTML"),!1;mainTable.updateInterface()},T.click.textInput=t=>{let e=t.dataset.action;b.textInput((function(t){var n,a;null===(n=(a=T.actions)[e])||void 0===n||n.call(a,t)}))},T.click.resetTable=()=>{b.confirm("Are you sure you want to reset the table? All data will be lost.",(()=>{mainTable.fullReset()}),null)},T.click.addColumn=t=>{mainTable.columns>=10&&b.alert("Having more than 10 columns is not recommended.");let e=t.dataset.column??null;e=null!=e?parseInt(e)+1:null,mainTable.addColumn(e),mainTable.updateInterface(["Header","Body"])},T.click.addRow=t=>{mainTable.rows>=30&&b.alert("Tables this large can be difficult to read. Consider using multiple tables instead.");let e=t.dataset.row??null;e=null!=e?parseInt(e)+1:null,mainTable.addRow(e),mainTable.updateInterface(["Body"])},T.click.removeColumn=t=>{if(1===mainTable.columns)return b.warning("You must have at least 1 column.");mainTable.removeColumn(t.dataset.column),mainTable.updateInterface(["Header","Body"])},T.click.removeRow=t=>{if(1===mainTable.rows)return b.warning("You must have at least 1 row.");mainTable.removeRow(t.dataset.row),mainTable.updateInterface(["Body"])},T.change.syncHeading=t=>{let e=t.dataset.location.split(",");mainTable.updateTableHead(e[1],t.value),mainTable.updateInterface(["Header"])},T.change.syncValue=t=>{let e=t.dataset.location.split(",");mainTable.updateTableBody(e[0],e[1],t.value)},T.keyup.syncCaption=t=>{mainTable.caption=t.value,mainTable.updateInterface(["Caption"])},T.click.getHtmlCode=()=>{let t=`<textarea class='embed'>${mainTable.htmlOutput}</textarea>`;b.modal(t)},T.click.previewTable=()=>{b.modal(mainTable.htmlOutput)},T.keyup.syncDefaultValue=t=>{mainTable.defaultNewValue=t.value};class k{constructor(t){this.name=t,this.start=performance.now(),this.result=0}stop(){return this.result=performance.now()-this.start,this}get detailedResults(){return`Task "${this.name}" executed in ${this.result} ms.`}}function C(t,e){var n=x,a=null,i=Math.random().toString().slice(2),o={name:t,gid:n.gid,origin:n.url,token:n.token,place:n.place,payload:e,callback:i};a=new $.Deferred;var r=function(t){if(t.origin==n.msghost){var e=t.data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return void console.log("Cannot parse message from OU Campus app:",e)}console.log("Response from OU Campus:",e),e.callback==i&&(window.removeEventListener("message",r,!1),a.resolve(e.payload))}};return window.addEventListener("message",r,!1),window.top.postMessage(JSON.stringify(o),n.msghost),a}var x={ready:function(t){var e=new $.Deferred;return this.isReady?(t&&t(),e.resolve()):$(this).one("ready",(function(){t&&t(),e.resolve()})),e},get:function(t){return"object"==typeof this[t]?JSON.parse(JSON.stringify(this[t])):this[t]},set:function(t,e){if("string"==typeof t)this[t]=e;else for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])},getConfig:function(t){return"object"==typeof this.config[t]?JSON.parse(JSON.stringify(this.config[t])):this.config[t]},setConfig:function(t,e){if("string"==typeof t)this.config[t]=e;else for(var n in t)t.hasOwnProperty(n)&&(this.config[n]=t[n])},fetch:function(){var t=this,e=t.apihost+"/gadgets/view",n={authorization_token:t.token,account:t.account,gadget:t.gid};return $.ajax({type:"GET",url:e,data:n,success:function(e){for(var n in t.config={},e.config)e.config.hasOwnProperty(n)&&(t.config[n]=e.config[n].value)},error:function(t,e,n){console.log("Fetch error:",e,n)}})},save:function(t,e){t&&this.setConfig(t,e);var n=this,a=n.apihost+"/gadgets/configure",i=n.config;return i.authorization_token=n.token,i.account=n.account,i.gadget=n.gid,$.ajax({type:"POST",url:a,data:i,success:function(t){},error:function(t,e,n){console.log("Save error:",e,n)}})},_sendMessageToTop:C,oucGetCurrentFileInfo:function(){return C("get-current-file-info")},oucInsertAtCursor:function(t){return C("insert-at-cursor",t)},oucGetCurrentLocation:function(){return C("get-location")},oucSetCurrentLocation:function(t){return C("set-location",t)},oucRefreshLocation:function(){return C("refresh-location")},oucGetWYSIWYGSelection:function(){return C("get-wysiwyg-selection")},oucGetWYSIWYGContent:function(){return C("get-wysiwyg-content")},oucGetSourceContent:function(){return C("get-source-content")}};for(var H in x)x[H]=x[H].bind(x);var _={gadget:x,paramValidation:function(t){if(!t)throw"Missing parameters for Metadata API request.";if(!t.action)throw"Missing 'action' property in options object";if(!(("update"!==t.action&&"delete"!==t.action&&"view"!==t.action||t.id)&&("create"!==t.action||t.mime_type&&t.metadata)&&("link"!==t.action||t.item&&t.id)&&("unlink"!==t.action||t.item)&&("grouplink"!==t.action||t.id&&t.groups)&&("groupunlink"!==t.action||t.id&&t.groups)&&("list"!==t.action||t.mime_type)))throw"Missing required parameter for '"+t.action+"' Metadata API request"},cleanProps:function(t,e){for(var n in t){var a;switch(n){case"mime_type":case"metadata":case"metadatas":case"scope":case"groups":case"item":case"item_type":case"id":case"ids":case"asset":case"page":case"directory":case"site":case"ou_site":a=!0;break;default:a=!1}a&&(e.data[n]=t[n],delete t[n])}return e},create:function(t,e){t||(t={}),e||(e={}),t.action="create",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/new",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},update:function(t,e){t||(t={}),e||(e={}),t.action="update",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/save",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},delete:function(t,e){t||(t={}),e||(e={}),t.action="delete",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/delete",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},list:function(t,e){t||(t={}),e||(e={}),t.action="list",this.paramValidation(t);var n={type:"GET",dataType:"json",url:this.gadget.apihost+"/metadata/list",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},view:function(t,e){t||(t={}),e||(e={}),t.action="view",this.paramValidation(t);var n={type:"GET",dataType:"json",url:this.gadget.apihost+"/metadata/view",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},link:function(t,e){t||(t={}),e||(e={}),t.action="link",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/"+t.link_type+"link",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},unlink:function(t,e){t||(t={}),e||(e={}),t.action="unlink",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/"+t.link_type+"unlink",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},groupLink:function(t,e){t||(t={}),e||(e={}),t.action="grouplink",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/grouplink",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))},groupUnlink:function(t,e){t||(t={}),e||(e={}),t.action="groupunlink",this.paramValidation(t);var n={type:"POST",dataType:"json",url:this.gadget.apihost+"/metadata/groupunlink",data:{site:t.ou_site||this.gadget.site,authorization_token:this.gadget.token}};return n=this.cleanProps(t,n),$.ajax($.extend(n,e))}};x.Metadata=_,x.set(function(){var t={},e=location.href.split(/[\?&]/),n=e.splice(1);t.url=e[0];for(var a,i,o,r=0;r<n.length;r++)i=(a=n[r].split("="))[0],o=a[1],t[i]=o;x.set(t)}()),C("get-environment").then((function(t){"Unrecognized message."!=t&&x.set(t),x.isReady=!0,$(x).trigger("ready")})),window.addEventListener("message",(function(t){var e=x;if(t.origin==e.msghost){var n=t.data;if("string"==typeof n)try{n=JSON.parse(n)}catch(t){return void console.log("Cannot parse message from OU Campus app:",n)}n.callback||(console.log("Message from OU Campus:",n),"configuration"==n.name&&e.setConfig(n.payload),$(e).trigger(n.name,n.payload))}}),!1),window.gadget=x,window.Gadget=function(){},window.Gadget.prototype=x;const S=()=>{x.ready().then(x.fetch).then((function(){console.log(`FZ: ${x.getConfig("font_size")}`)})),document.body.addEventListener("gadget_insert",(function(t){let e=t.detail;x.oucInsertAtCursor(e).then((function(t){t.error&&alert(t.error)}))})),console.log(window.message??"No Message, Setup Done."),$=$||window.$,$(x).on({expanded:function(t){console.log("Gadget expanded.")},collapsed:function(t){console.log("Gadget collapsed.")},configuration:function(t,e){console.log("New config:",e),$("#main").css({"font-size":e.font_size})},notification:function(t,e){console.log("Notification received:",e)}})};export const pageContext={};export const mainTable=new class{constructor(t){this.tableId=t,this.caption="Table Caption",this.tableHeading=["Heading"],this.tableBody=[["Value"]],this.defaultNewValue="New Value",this.templates={}}get isValid(){return!(this.caption.length<=0)||(this.validationError="The caption cannot be blank.",!1)}get element(){return document.getElementById(this.tableId)}get columns(){return this.tableHeading.length}get rows(){return this.tableBody.length}get tdTemplate(){var t;if(this.templates.td)return this.templates.td;let e=`.td[data-template-for="${this.tableId}"]`,n=null===(t=document.querySelector(e))||void 0===t?void 0:t.innerHTML;return this.templates.td=n,n}get thTemplate(){var t;if(this.templates.th)return this.templates.th;let e=`.th[data-template-for="${this.tableId}"]`,n=null===(t=document.querySelector(e))||void 0===t?void 0:t.innerHTML;return this.templates.th=n,n}get rowTemplate(){var t;if(this.templates.row)return this.templates.row;let e=`.row[data-template-for="${this.tableId}"]`,n=null===(t=document.querySelector(e))||void 0===t?void 0:t.innerHTML;return this.templates.row=n,n}import(t){var e,n,a;let i=document.createElement("div");if(document.body.appendChild(i),i.style.visibility="hidden",i.innerHTML=t,((null===(e=i.querySelector("table"))||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)??0)<=0)return!1;let o=(null===(a=i.querySelector("caption"))||void 0===a?void 0:a.textContent)??"No Caption",r=Array.from(i.querySelectorAll("th")).map((t=>t.textContent)),s=0,l=Array.from(i.querySelectorAll("tr")).map(((t,e)=>{let n=Array.from(t.querySelectorAll("td")).map((t=>t.textContent));return s=s<n.length?n.length:s,n})).filter((t=>t.length>0));if(s=s<r.length?r.length:s,l.forEach((t=>{let e=s-t.length,n=0;for(;n<e;n++)t.push(this.defaultNewValue)})),r.length<s){let t=s-r.length,e=0;for(;e<t;e++)r.push("Heading")}return i.parentElement.removeChild(i),this.caption=o,this.tableHeading=r,this.tableBody=l,!0}fullReset(){this.caption="Table Caption",this.tableHeading=["Heading"],this.tableBody=[["Value"]],this.defaultNewValue="New Value",this.updateInterface()}addColumn(t){t=t??this.tableHeading.length,this.tableHeading.splice(t,0,"New Heading"),this.tableBody.forEach(((e,n)=>{e.splice(t,0,this.defaultNewValue)}))}addRow(t){t=t??this.tableBody.length;let e=[];this.tableHeading.forEach(((t,n)=>{e.push(this.defaultNewValue)})),this.tableBody.splice(t,0,e)}removeColumn(t){this.tableHeading.splice(t,1),this.tableBody.forEach(((e,n)=>{e.splice(t,1)}))}removeRow(t){this.tableBody.splice(t,1)}get htmlOutput(){let t=this.tableHeading.map((t=>`\n           <th>${t}</th>`)).join(" "),e="";return this.tableBody.forEach((t=>{e+="\n      <tr>"+t.map((t=>`\n         <td>${t}</td>`)).join(" ")+"\n     </tr>"})),` \n<table>\n    <caption>${this.caption}</caption>\n    <thead>\n        <tr>${t}\n        </tr>\n    </thead>\n    <tbody>${e}\n    </tbody>\n</table>`}_calcNumber(t,e){return e+this.columns*t+1}_uiCaption(){this.element.querySelector("caption").textContent=this.caption}_uiHeader(){let t=this._calcNumber.bind(this),e=this.tableHeading.map(((e,n)=>{let a={column:n,number:t(0,n),row:0,value:e,type:"Heading",first:0===n};return v.render(this.thTemplate,a)})).join("");this.element.querySelector("thead").innerHTML=e}_uiBody(){let t="",e=this.columns,n=this._calcNumber.bind(this);this.tableBody.forEach(((a,i)=>{let o={rowContent:a.map(((t,e)=>{let a={column:e,row:i,number:n(i,e),value:t,type:"Value"};return a.first=0==e,v.render(this.tdTemplate,a)})).join(""),row:i,nextRow:i+1,columns:e};t+=v.render(this.rowTemplate,o)})),this.element.querySelector("tbody").innerHTML=t}updateInterface(t,e){let n=new k("Update UI"),a=0,i=(t=t??["Caption","Header","Body"]).length;for(;a<i;a++){var o;let e=`_ui${null===(o=t)||void 0===o?void 0:o[a]}`;(null==this?void 0:this[e]).bind(this).call()}console.log(n.stop().detailedResults),n.result>50&&b.alert("The performance of this application is lower than normal. This table may be too large.")}updateTableHead(t,e){var n;null!==(n=this.tableHeading)&&void 0!==n&&n[t]&&(this.tableHeading[t]=e)}updateTableBody(t,e,n){var a,i;null!==(a=this.tableBody)&&void 0!==a&&null!==(i=a[t])&&void 0!==i&&i[e]&&(this.tableBody[t][e]=n)}}("MainTable");window._mainTable=mainTable,document.body.addEventListener("keyup",(t=>{var e,n;let a=t.target;null===(e=(n=T.keyup)[a.dataset.keyup])||void 0===e||e.call(n,a,t)})),document.body.addEventListener("change",(t=>{var e,n;let a=t.target;null===(e=(n=T.change)[a.dataset.change])||void 0===e||e.call(n,a,t)})),document.body.addEventListener("click",(t=>{var e,n;let a=t.target;null===(e=(n=T.click)[a.dataset.click])||void 0===e||e.call(n,a,t)})),document.body.onload=()=>{mainTable.updateInterface()},"loading"!=document.readyState?S():document.addEventListener("DOMContentLoaded",S),window._debug={context:pageContext,mainTable:mainTable,events:T,ou:!0};
//# sourceMappingURL=index.34b921b0.js.map
