{"mappings":"AA6GA,SAAAA,EAA0BC,EAAMC,OACxBC,EAAOC,EACPC,EAAW,KACXC,EAAQC,KAAKC,SAASC,WAAWC,MAAM,GACvCC,EAAAA,CACAV,KAAMA,EACNW,IAAKT,EAAKS,IACVC,OAAQV,EAAKW,IACbC,MAAOZ,EAAKY,MACZC,MAAOb,EAAKa,MACZd,QAASA,EACTe,SAAUX,GAEdD,EAAAA,IAAea,EAAEC,aACbC,EAAkB,SAAUC,MACxBA,EAAIR,QAAUV,EAAKmB,aAGnBX,EAAUU,EAAIE,QACI,iBAAXZ,MAEHA,EAAUa,KAAKC,MAAMd,SAChBe,eACLC,QAAQC,IAAI,2CAA4CjB,GAIhEgB,QAAQC,IAAI,2BAA4BjB,GACpCA,EAAQM,UAAYX,IACpBuB,OAAOC,oBAAoB,UAAWV,GAAiB,GACvDf,EAAS0B,QAAQpB,EAAQT,mBAGjC2B,OAAOG,iBAAiB,UAAWZ,GAAiB,GACpDS,OAAOI,IAAIC,YAAYV,KAAKW,UAAUxB,GAAUR,EAAKmB,SAC9CjB,MA+BPD,EAAAA,CACAgC,MAAO,SAAUnB,OAUTZ,EAAAA,IAAea,EAAEC,gBACjBkB,KAAKC,SACLrB,GAAYA,IACZZ,EAAS0B,WAETb,EAAEmB,MAAME,IAAI,SAAS,WACjBtB,GAAYA,IACZZ,EAAS0B,aAGV1B,GAEXmC,IAAK,SAAUC,SAEkB,iBAAlBJ,KAAKI,GACLjB,KAAKC,MAAMD,KAAKW,UAAUE,KAAKI,KAE/BJ,KAAKI,IAGpBC,IAAK,SAAUC,EAAMC,MAME,iBAARD,EAEPN,KAAKM,GAAQC,eAGJC,KAAOF,EACRA,EAAKG,eAAeD,KACpBR,KAAKQ,GAAOF,EAAKE,KAKjCE,UAAW,SAAUN,SAGmB,iBAAzBJ,KAAKW,OAAOP,GACZjB,KAAKC,MAAMD,KAAKW,UAAUE,KAAKW,OAAOP,KAEtCJ,KAAKW,OAAOP,IAG3BQ,UAAW,SAAUN,EAAMC,MAEJ,iBAARD,EAEPN,KAAKW,OAAOL,GAAQC,eAGXC,KAAOF,EACRA,EAAKG,eAAeD,KACpBR,KAAKW,OAAOH,GAAOF,EAAKE,KAKxCK,MAAO,eAQC/C,EAAOkC,KACPc,EAAWhD,EAAKiD,QAAU,gBAC1BC,EAAAA,CACAC,oBAAqBnD,EAAKY,MAC1BwC,QAASpD,EAAKoD,QACdC,OAAQrD,EAAKS,YAEVM,EAAEuC,KAAAA,CACLC,KAAM,MACN5C,IAAKqC,EACL5B,KAAM8B,EACNM,QAAS,SAAUpC,WAGNsB,KADT1C,EAAK6C,OAAAA,GACWzB,EAAKyB,OACbzB,EAAKyB,OAAOF,eAAeD,KAC3B1C,EAAK6C,OAAOH,GAAOtB,EAAKyB,OAAOH,GAAKe,QAIhDC,MAAO,SAAUC,EAAKC,EAAQF,GAC1BlC,QAAQC,IAAI,eAAgBmC,EAAQF,OAIhDG,KAAM,SAAUrB,EAAMC,GAMdD,GACAN,KAAKY,UAAUN,EAAMC,OAErBzC,EAAOkC,KACPc,EAAWhD,EAAKiD,QAAU,qBAC1BC,EAASlD,EAAK6C,cAClBK,EAAOC,oBAAsBnD,EAAKY,MAClCsC,EAAOE,QAAUpD,EAAKoD,QACtBF,EAAOG,OAASrD,EAAKS,IACdM,EAAEuC,KAAAA,CACLC,KAAM,OACN5C,IAAKqC,EACL5B,KAAM8B,EACNM,QAAS,SAAUpC,KAGnBsC,MAAO,SAAUC,EAAKC,EAAQF,GAC1BlC,QAAQC,IAAI,cAAemC,EAAQF,OAK/CI,kBAAmBjE,EAGnBkE,sBAAuB,kBAGZlE,EAAiB,0BAE5BmE,kBAAmB,SAAUC,UAGlBpE,EAAiB,mBAAoBoE,IAEhDC,sBAAuB,kBAEZrE,EAAiB,iBAE5BsE,sBAAuB,SAAUC,UAgBtBvE,EAAiB,eAAgBuE,IAE5CC,mBAAoB,kBACTxE,EAAiB,qBAE5ByE,uBAAwB,kBACbzE,EAAiB,0BAE5B0E,qBAAsB,kBACX1E,EAAiB,wBAE5B2E,oBAAqB,kBACV3E,EAAiB,gCAKvB4E,KAAUxE,EACfA,EAAOwE,GAAUxE,EAAOwE,GAAQC,KAAKzE,OAGrC0E,EAAAA,CAcAtB,OAAQpD,EAER2E,gBAAiB,SAAU1B,OAClBA,OAAgB,mDAChBA,EAAO2B,YAAgB,oDACJ,WAAlB3B,EAAO2B,QAAyC,WAAlB3B,EAAO2B,QAAyC,SAAlB3B,EAAO2B,QAAuB3B,EAAO4B,MAChF,WAAlB5B,EAAO2B,QAAyB3B,EAAO6B,WAAc7B,EAAO8B,YAC1C,SAAlB9B,EAAO2B,QAAuB3B,EAAO+B,MAAS/B,EAAO4B,MACnC,WAAlB5B,EAAO2B,QAAwB3B,EAAO+B,QACpB,cAAlB/B,EAAO2B,QAA4B3B,EAAO4B,IAAO5B,EAAOgC,UACtC,gBAAlBhC,EAAO2B,QAA8B3B,EAAO4B,IAAO5B,EAAOgC,UACxC,SAAlBhC,EAAO2B,QAAsB3B,EAAO6B,iBAC/B,mCAAsC7B,EAAO2B,OAAS,0BAGpEM,WAAY,SAAUjC,EAAQkC,WACjBC,KAAQnC,EAAAA,KACToC,SACID,OACC,gBACA,eACA,gBACA,YACA,aACA,WACA,gBACA,SACA,UACA,YACA,WACA,gBACA,WACA,UAAWC,GAAe,gBACtBA,GAAe,EAExBA,IACAF,EAAShE,KAAKiE,GAAQnC,EAAOmC,UACtBnC,EAAOmC,WAGfD,GAEXG,OAAQ,SAAUrC,EAAQsC,GACjBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,SAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,gBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCM,OAAQ,SAAU5C,EAAQsC,GACjBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,SAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,iBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCO,OAAQ,SAAU7C,EAAQsC,GACjBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,SAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,mBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCQ,KAAM,SAAU9C,EAAQsC,GACftC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,OAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,MACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,iBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCS,KAAM,SAAU/C,EAAQsC,GACftC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,OAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,MACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,iBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCU,KAAM,SAAUhD,EAAQsC,GACftC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,OAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,aAAeC,EAAOiD,UAAY,OAC7D/E,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCY,OAAQ,SAAUlD,EAAQsC,GACjBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,SAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,aAAeC,EAAOiD,UAAY,SAC7D/E,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCa,UAAW,SAAUnD,EAAQsC,GACpBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,YAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,sBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,KAEvCc,YAAa,SAAUpD,EAAQsC,GACtBtC,IAAUA,EAAAA,IACVsC,IAAWA,EAAAA,IAChBtC,EAAO2B,OAAS,cAChB3C,KAAK0C,gBAAgB1B,OACjBuC,EAAAA,CACAlC,KAAM,OACNmC,SAAU,OACV/E,IAAKuB,KAAKmB,OAAOJ,QAAU,wBAC3B7B,KAAAA,CACIuE,KAAMzC,EAAO0C,SAAW1D,KAAKmB,OAAOsC,KACpCxC,oBAAqBjB,KAAKmB,OAAOzC,eAGzC6E,EAAavD,KAAKiD,WAAWjC,EAAQuC,GAC9B1E,EAAEuC,KAAKvC,EAAE8E,OAAOJ,EAAYD,MAI3CvF,EAAOsG,SAAW5B,EAElB1E,EAAOsC,IAheP,eACQnB,EAAAA,GACAoF,EAAQC,SAASC,KAAKF,MAAM,SAC5BG,EAAaH,EAAMI,OAAO,GAC9BxF,EAAKT,IAAM6F,EAAM,WACRK,EAAQC,EAAMC,EAAOC,EAAI,EAAGA,EAAIL,EAAWM,OAAQD,IAExDF,GADAD,EAASF,EAAWK,GAAGR,MAAM,MACf,GACdO,EAAQF,EAAO,GACfzF,EAAK0F,GAAQC,EAEjB9G,EAAOsC,IAAInB,GAqdJ8F,IAneArH,EAAiB,mBAoeXsH,MAAK,SAAUC,GACZ,yBAAZA,GACAnH,EAAOsC,IAAI6E,GAEfnH,EAAOkC,SAAU,EACjBpB,EAAEd,GAAQoH,QAAQ,YAGtB3F,OAAOG,iBAAiB,WArbxB,SAAwBX,OAChBlB,EAAOC,KAEPiB,EAAIR,QAAUV,EAAKmB,aAGnBX,EAAUU,EAAIE,QACI,iBAAXZ,MAEHA,EAAUa,KAAKC,MAAMd,SAChBe,eACLC,QAAQC,IAAI,2CAA4CjB,GAI5DA,EAAQM,WAIZU,QAAQC,IAAI,0BAA2BjB,GACnB,iBAAhBA,EAAQV,MACRE,EAAK8C,UAAUtC,EAAQT,SAE3BgB,EAAEf,GAAMqH,QAAQ7G,EAAQV,KAAMU,EAAQT,cA8ZS,GAGnD2B,OAAO2B,OAASpD,EAGhByB,OAAO4F,OAAS,aAChB5F,OAAO4F,OAAOC,UAAYtH,gBC3kBN,OACLgC,QAAQkF,KAAAA,EAAYpE,OAAOoE,MAAK,WACnC3F,QAAQC,IAAAA,OAAKxB,EAAa2C,UAAU,mBAIxC4E,SAASC,KAAK5F,iBAAiB,iBAAiB,SAAUT,OAClDsG,EAAWtG,EAAKuG,SAEb3D,kBAAkB0D,GAAUP,MAAK,SAAUS,GAC1CA,EAAOlE,OACPmE,MAAMD,EAAOlE,aAIzBlC,QAAQC,IAAIC,OAAOlB,SAAW,2BAElCO,EAAIA,GAAKW,OAAOX,EAEhBA,EAAAA,GAAU+G,GAAAA,CACNC,SAAY,SAAU7G,GAElBM,QAAQC,IAAI,qBAEhBuG,UAAa,SAAU9G,GAEnBM,QAAQC,IAAI,sBAEhBwG,cAAiB,SAAU/G,EAAK2B,GAG5BrB,QAAQC,IAAI,cAAeoB,GAC3B9B,EAAE,SAASmH,IAAAA,CAAMC,YAAatF,EAAOuF,aAEzCC,aAAgB,SAAUnH,EAAKmH,GAI3B7G,QAAQC,IAAI,yBAA0B4G","sources":["./scripts/libs/gadgetlib.js","./scripts/setup_gadget.js"],"sourcesContent":["/*\n    gadgetlib.js v1.0.7.1\n    Copyright 2015 OmniUpdate, Inc.\n    http://www.omniupdate.com/\n\n    Changes in 1.0.7.1:\n      - gadgetlib.min.js is now offered.\n\n    Changes in 1.0.6.1:\n      - Reintroduced the `Gadget` object, which was dropped in version 1.0.4, for backward\n        compatibility with gadgets that were written against the old library.\n    \n    Changes in 1.0.6:\n      - The `sendMessageToTop` function is again exposed as the `_sendMessageToTop` method of\n        the `gadget` object. Version 1.0.4 had removed this public method, breaking functionality\n        in gadgets that called it.\n    \n    Changes in 1.0.5.1:\n      - No code changes. Edited change log to reflect that changes to API token access will\n        occur in OU Campus v10.3, not v10.2.2.\n    \n    Changes in 1.0.5:\n      - All gadget methods are bound to the gadget to better support use as callbacks.\n    \n    Changes in 1.0.4:\n      - Starting with OU Campus v10.3, the API access token and certain environment details will\n        no longer be embedded in the URLs of custom gadgets. Instead, gadgets must request this\n        information from the OU Campus app. This version of gadgetlib does this automatically,\n        but since the process is asynchronous, gadget scripts must wait for the token to become\n        available before they can use it.\n        \n        To accommodate this change, you should wrap the main logic of your gadget in a function\n        that is called by the new `gadget.ready()` method. This method accepts a single argument,\n        which is a reference to the function to be called when the API token has been received.\n        The method returns a jQuery Deferred object, so alternatively you can provide the callback\n        function as an argument to the `.then()` method of the return object, as in\n        `gadget.ready().then(myFunc)`.\n        \n        The `gadget.ready()` method already works with OU Campus v10.2.1.1. Although the new way\n        of obtaining the API token will not be in place until 10.3, you should adapt your\n        gadgets to the new method now in preparation for the change.\n    \n    Changes in 1.0.3:\n      - sendMessageToTop function now JSON-stringifies message data for compatibility with IE9.\n    \n    Changes in 1.0.2:\n      - Library now exports gadget object directly to window; no need to use Gadget constructor.\n    \n    Changes in 1.0.1:\n      - Added oucGetCurrentFileInfo method.\n*/\n\n// private function \nfunction getEnvironment() {\n    /*\n        This private function gets certain information by making a request to OU Campus,\n        including key information you'll need to make an OU Campus API call. These data then\n        become properties of the gadget object. The properties are as follows:\n        \n        Name        Example Value               Description\n        ----------- --------------------------- ---------------------------------------------------\n        apihost     http://a.cms.omniupdate.com The HTTP root address of the OU Campus\n                                                application server, which is also the API\n                                                server. All OU Campus  API endpoints begin\n                                                with this value.\n        token       A3xthrVCELk8XIaOEQKrIF      The authorization token provided to your gadget\n                                                for the current login session. Must be\n                                                submitted with every API call, in the\n                                                authorization_token parameter.\n        gid         ae206856-114c-4124-b0f1     A generated ID that uniquely identifies your\n                                                gadget. This is used internally by the `fetch`\n                                                and `save` methods.\n        place       sidebar                     Lets you know where in the OU Campus user\n                                                interface  the current instance of your gadget\n                                                is. This can be either 'dashboard' or\n                                                'sidebar'.\n        skin        testdrives                  The name of the current OU Campus skin.\n        account     Gallena_University          The name of the OU Campus account to which the\n                                                user is logged in.\n        site        School_of_Medicine          The name of the site that is currently active\n                                                in OU Campus.\n        user        jdoe                        The username of the logged-in OU Campus user.\n        hostbase    /10/#skin/account/site      The starting fragment of all paths of pages in\n                                                the current OU Campus session. Use this to help\n                                                construct URLs to OU Campus pages that your\n                                                gadget can link to or load in the top window.\n        \n        So, for example, to get the apihost and token values, you would use:\n        \n            var apihost = gadget.get('apihost');\n            var token = gadget.get('token');\n    */\n    return sendMessageToTop('get-environment');\n}\n// private function \nfunction getDataFromUrl() {\n    var data = {};\n    var split = location.href.split(/[\\?&]/);\n    var paramArray = split.splice(1);\n    data.url = split[0];\n    for (var pieces, left, right, i = 0; i < paramArray.length; i++) {\n        pieces = paramArray[i].split('=');\n        left = pieces[0];\n        right = pieces[1];\n        data[left] = right;\n    }\n    gadget.set(data);\n}\n// private function \nfunction sendMessageToTop(name, payload) {\n    var self = gadget;\n    var deferred = null;\n    var msgid = Math.random().toString().slice(2);\n    var message = {\n        name: name,\n        gid: self.gid,\n        origin: self.url,\n        token: self.token,\n        place: self.place,\n        payload: payload,\n        callback: msgid\n    };\n    deferred = new $.Deferred();\n    var _messageHandler = function (evt) {\n        if (evt.origin != self.msghost) {\n            return;\n        }\n        var message = evt.data;\n        if (typeof message == 'string') {\n            try {\n                message = JSON.parse(message);\n            } catch (e) {\n                console.log('Cannot parse message from OU Campus app:', message);\n                return;\n            }\n        }\n        console.log('Response from OU Campus:', message);\n        if (message.callback == msgid) {\n            window.removeEventListener('message', _messageHandler, false);\n            deferred.resolve(message.payload);\n        }\n    };\n    window.addEventListener('message', _messageHandler, false);\n    window.top.postMessage(JSON.stringify(message), self.msghost);\n    return deferred;\n}\n// private function \nfunction messageHandler(evt) {\n    var self = gadget;\n\n    if (evt.origin != self.msghost) {\n        return;\n    }\n    var message = evt.data;\n    if (typeof message == 'string') {\n        try {\n            message = JSON.parse(message);\n        } catch (e) {\n            console.log('Cannot parse message from OU Campus app:', message);\n            return;\n        }\n    }\n    if (message.callback) {\n        // the message listener in sendMessageToTop will handle this message\n        return;\n    }\n    console.log('Message from OU Campus:', message);\n    if (message.name == 'configuration') {\n        self.setConfig(message.payload);\n    }\n    $(self).trigger(message.name, message.payload);\n}\n\n// the gadget object definition; contains the public methods available to use in your gadget\n// as methods of the `gadget` object\nvar gadget = {\n    ready: function (callback) {\n        // Your code should call this asynchronous method (once) before doing anything that\n        // requires an API token or any of the other data provided by the private\n        // `getEnvironment` method. The main logic of the gadget should be wrapped in a\n        // function that is called when the `ready` method has completed.\n        // You can provide the callback function either as an argument to the `ready`\n        // method itself, as in `gadget.ready(myFunc)`, or as an argument to the `then` method\n        // of the jQuery Deferred object that this method returns, as in\n        // `gadget.ready().then(myFunc)`.\n\n        var deferred = new $.Deferred();\n        if (this.isReady) {\n            callback && callback();\n            deferred.resolve();\n        } else {\n            $(this).one('ready', function () {\n                callback && callback();\n                deferred.resolve();\n            });\n        }\n        return deferred;\n    },\n    get: function (propName) {\n        // Get the value of a property of the gadget.\n        if (typeof this[propName] == 'object') {\n            return JSON.parse(JSON.stringify(this[propName]));\n        } else {\n            return this[propName];\n        }\n    },\n    set: function (arg0, arg1) {\n        // Set a property of the gadget. You can pass either a single property name and value\n        // as two arguments, e.g.:\n        //     gadget.set('favoriteColor', 'blue');\n        // or several properties in a plain object, e.g.:\n        //     gadget.set({ favoriteColor: 'blue', favoriteFlavor: 'vanilla' });\n        if (typeof arg0 == 'string') {\n            // assume arg0 is a property name and arg1 is the property value\n            this[arg0] = arg1;\n        } else {\n            // assume arg0 is an object\n            for (var key in arg0) {\n                if (arg0.hasOwnProperty(key)) {\n                    this[key] = arg0[key];\n                }\n            }\n        }\n    },\n    getConfig: function (propName) {\n        // Same as the `get` method, but returns a subproperty of the gadget's `config`\n        // property, which is set by the `fetch` method.\n        if (typeof this.config[propName] == 'object') {\n            return JSON.parse(JSON.stringify(this.config[propName]));\n        } else {\n            return this.config[propName];\n        }\n    },\n    setConfig: function (arg0, arg1) {\n        // Same as the `set` method, but sets a subproperty of the gadget's `config` property.\n        if (typeof arg0 == 'string') {\n            // assume arg0 is a property name and arg1 is the property value\n            this.config[arg0] = arg1;\n        } else {\n            // assume arg0 is an object\n            for (var key in arg0) {\n                if (arg0.hasOwnProperty(key)) {\n                    this.config[key] = arg0[key];\n                }\n            }\n        }\n    },\n    fetch: function () {\n        // A convenience method to get the gadget's configuration as stored in the OU Campus\n        // database by calling the /gadgets/view API. On a successful API call, the method\n        // saves the config into the Gadget instance; you can then use `getConfig` to get\n        // specific properties of the configuration.\n        //\n        // The method returns a jQuery Deferred object, so you can use methods like `then` to\n        // do stuff once the API call has received a response.\n        var self = this;\n        var endpoint = self.apihost + '/gadgets/view';\n        var params = {\n            authorization_token: self.token,\n            account: self.account,\n            gadget: self.gid\n        };\n        return $.ajax({\n            type: 'GET',\n            url: endpoint,\n            data: params,\n            success: function (data) {\n                // console.log('Fetched data:', data);\n                self.config = {};\n                for (var key in data.config) {\n                    if (data.config.hasOwnProperty(key)) {\n                        self.config[key] = data.config[key].value;\n                    }\n                }\n            },\n            error: function (xhr, status, error) {\n                console.log('Fetch error:', status, error);\n            }\n        });\n    },\n    save: function (arg0, arg1) {\n        // A convenience method to set one or more properties of the gadget's configuration\n        // back to the OU Campus database by calling /gadgets/configure.\n        //\n        // The method returns a jQuery Deferred object, so you can use methods like `then`\n        // to do stuff once the API call has received a response.\n        if (arg0) {\n            this.setConfig(arg0, arg1);\n        }\n        var self = this;\n        var endpoint = self.apihost + '/gadgets/configure';\n        var params = self.config;\n        params.authorization_token = self.token;\n        params.account = self.account;\n        params.gadget = self.gid;\n        return $.ajax({\n            type: 'POST',\n            url: endpoint,\n            data: params,\n            success: function (data) {\n                // console.log('Saved:', data);\n            },\n            error: function (xhr, status, error) {\n                console.log('Save error:', status, error);\n            }\n        });\n    },\n    // for backward compatibility with pre-1.0.4 versions of gadgetlib.js\n    _sendMessageToTop: sendMessageToTop,\n    // Each of the \"ouc\" methods below is an asynchronous method that returns a jQuery Deferred\n    // object, so you can use methods like `then` to do stuff once the operation is finished.\n    oucGetCurrentFileInfo: function () {\n        // Causes OU Campus to respond with information about the current file in OU Campus, if\n        // the current view is file-specific.\n        return sendMessageToTop('get-current-file-info');\n    },\n    oucInsertAtCursor: function (content) {\n        // Causes OU Campus to insert the content at the cursor location in, and only in, a WYSIWYG\n        // editor (such as JustEdit) and the source code editor.\n        return sendMessageToTop('insert-at-cursor', content);\n    },\n    oucGetCurrentLocation: function () {\n        // Causes OU Campus to respond with the app window's location info.\n        return sendMessageToTop('get-location');\n    },\n    oucSetCurrentLocation: function (route) {\n        /*\n            Causes OU Campus to set the \"route\" of the OU Campus application. The route is the\n            portion of the app's location that follows the sitename. For example, if the\n            current app URL is\n            \n            \"http://a.cms.omniupdate.com/10/#oucampus/gallena/art/browse/staging/about\"\n            \n            then the route is \"/browse/staging/about\". Changing the route will effectively\n            change the current OU Campus view, just as if the user had clicked a link within\n            OU Campus.\n            \n            This method accepts a single string parameter, which is the new route. It should\n            start with a slash. After the route has been changed, the method will respond with\n            the new location.\n        */\n        return sendMessageToTop('set-location', route);\n    },\n    oucRefreshLocation: function () {\n        return sendMessageToTop('refresh-location');\n    },\n    oucGetWYSIWYGSelection: function () {\n        return sendMessageToTop('get-wysiwyg-selection');\n    },\n    oucGetWYSIWYGContent: function () {\n        return sendMessageToTop('get-wysiwyg-content');\n    },\n    oucGetSourceContent: function () {\n        return sendMessageToTop('get-source-content');\n    }\n};\n\n// bind all methods to the gadget object\nfor (var method in gadget) {\n    gadget[method] = gadget[method].bind(gadget);\n}\n\nvar MetadataAPI = {\n    /*\n     * MetaData API\n     *\n     * @description :: API to interact with OU Campus gadget Metadata backend\n     * @documentation :: https://docs\n     *\n     * @method Metadata\n     * @param {object} params Argument 1\n     * @param {String} params.action Metadata action name.\n     * @param {string} params.link_type Required if 'link' or 'unlink' actions are called.\n     * @return {promise} Ajax promise object.\n     *\n     */\n    gadget: gadget,\n    //Param Validation\n    paramValidation: function (params) {\n        if (!params) { throw 'Missing parameters for Metadata API request.'; }\n        if (!params.action) { throw 'Missing \\'action\\' property in options object'; }\n        if (((params.action === 'update' || params.action === 'delete' || params.action === 'view') && !params.id) ||\n            (params.action === 'create' && (!params.mime_type || !params.metadata)) ||\n            (params.action === 'link' && (!params.item || !params.id)) ||\n            (params.action === 'unlink' && !params.item) ||\n            (params.action === 'grouplink' && (!params.id || !params.groups)) ||\n            (params.action === 'groupunlink' && (!params.id || !params.groups)) ||\n            (params.action === 'list' && !params.mime_type)) {\n            throw 'Missing required parameter for \\'' + params.action + '\\' Metadata API request';\n        }\n    },\n    cleanProps: function (params, defaults) {\n        for (var prop in params) {\n            var metadataProp;\n            switch (prop) {\n                case 'mime_type': metadataProp = true; break;\n                case 'metadata': metadataProp = true; break;\n                case 'metadatas': metadataProp = true; break;\n                case 'scope': metadataProp = true; break;\n                case 'groups': metadataProp = true; break;\n                case 'item': metadataProp = true; break;\n                case 'item_type': metadataProp = true; break;\n                case 'id': metadataProp = true; break;\n                case 'ids': metadataProp = true; break;\n                case 'asset': metadataProp = true; break;\n                case 'page': metadataProp = true; break;\n                case 'directory': metadataProp = true; break;\n                case 'site': metadataProp = true; break;\n                case 'ou_site': metadataProp = true; break;\n                default: metadataProp = false;\n            }\n            if (metadataProp) {\n                defaults.data[prop] = params[prop];\n                delete params[prop];\n            }\n        }\n        return defaults;\n    },\n    create: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'create';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/new',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    update: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'update';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/save',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    delete: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'delete';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/delete',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    list: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'list';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'GET',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/list',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    view: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'view';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'GET',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/view',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    link: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'link';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/' + params.link_type + 'link',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    unlink: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'unlink';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/' + params.link_type + 'unlink',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    groupLink: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'grouplink';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/grouplink',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    },\n    groupUnlink: function (params, options) {\n        if (!params) { params = {}; }\n        if (!options) { options = {}; }\n        params.action = 'groupunlink';\n        this.paramValidation(params);\n        var ajaxParams = {\n            type: 'POST',\n            dataType: 'json',\n            url: this.gadget.apihost + '/metadata/groupunlink',\n            data: {\n                site: params.ou_site || this.gadget.site,\n                authorization_token: this.gadget.token\n            }\n        };\n        ajaxParams = this.cleanProps(params, ajaxParams);\n        return $.ajax($.extend(ajaxParams, options));\n    }\n};\n\ngadget.Metadata = MetadataAPI;\n\ngadget.set(getDataFromUrl());\ngetEnvironment().then(function (response) {\n    if (response != 'Unrecognized message.') {\n        gadget.set(response);\n    }\n    gadget.isReady = true;\n    $(gadget).trigger('ready');\n});\n\nwindow.addEventListener('message', messageHandler, false);\n\n// make the gadget object available as a global variable\nwindow.gadget = gadget;\n\n// for backward compatibility with pre-1.0.4 versions of gadgetlib.js\nwindow.Gadget = function () { };\nwindow.Gadget.prototype = gadget;\n\n\nexport default gadget;\n\n","// JQUERY IS REQUIRED \r\n\r\nimport gadget from './libs/gadgetlib.js';\r\n\r\nconst setupGadget = () => {\r\n        gadget.ready().then(gadget.fetch).then(function () {\r\n            console.log(`FZ: ${gadget.getConfig('font_size')}`);\r\n        });\r\n\r\n\r\n        document.body.addEventListener(\"gadget_insert\", function (data) {\r\n            let htmlCode = data.detail;\r\n\r\n            gadget.oucInsertAtCursor(htmlCode).then(function (result) {\r\n                if (result.error) {\r\n                    alert(result.error);\r\n                }\r\n            });\r\n        });\r\n        console.log(window.message ?? \"No Message, Setup Done.\");\r\n\r\n    $ = $ || window.$;\r\n    \r\n    $(gadget).on({\r\n        'expanded': function (evt) {\r\n            // This event is triggered when the user expands (makes visible) a sidebar gadget.\r\n            console.log('Gadget expanded.');\r\n        },\r\n        'collapsed': function (evt) {\r\n            // This event is triggered when the user collapses (hides) a sidebar gadget.\r\n            console.log('Gadget collapsed.');\r\n        },\r\n        'configuration': function (evt, config) {\r\n            // If the user changes the gadget's configuration through the configuration modal,\r\n            // the gadget will hear about it and get the new config in the data argument here.\r\n            console.log('New config:', config);\r\n            $('#main').css({ 'font-size': config.font_size });\r\n        },\r\n        'notification': function (evt, notification) {\r\n            // If the gadget's config.xml contains a \"notification\" entry, any notifications\r\n            // of the specified type(s) generated by OU Campus will trigger 'notification'\r\n            // events that can be handled here.\r\n            console.log('Notification received:', notification);\r\n        }\r\n    });\r\n};\r\n\r\nexport default setupGadget;"],"names":["$64eedf2b3cf5e1b22733aea702adb765$var$sendMessageToTop","name","payload","self","$64eedf2b3cf5e1b22733aea702adb765$export$default","deferred","msgid","Math","random","toString","slice","message","gid","origin","url","token","place","callback","$","Deferred","_messageHandler","evt","msghost","data","JSON","parse","e","console","log","window","removeEventListener","resolve","addEventListener","top","postMessage","stringify","ready","this","isReady","one","get","propName","set","arg0","arg1","key","hasOwnProperty","getConfig","config","setConfig","fetch","endpoint","apihost","params","authorization_token","account","gadget","ajax","type","success","value","error","xhr","status","save","_sendMessageToTop","oucGetCurrentFileInfo","oucInsertAtCursor","content","oucGetCurrentLocation","oucSetCurrentLocation","route","oucRefreshLocation","oucGetWYSIWYGSelection","oucGetWYSIWYGContent","oucGetSourceContent","$64eedf2b3cf5e1b22733aea702adb765$var$method","bind","$64eedf2b3cf5e1b22733aea702adb765$var$MetadataAPI","paramValidation","action","id","mime_type","metadata","item","groups","cleanProps","defaults","prop","metadataProp","create","options","ajaxParams","dataType","site","ou_site","extend","update","delete","list","view","link","link_type","unlink","groupLink","groupUnlink","Metadata","split","location","href","paramArray","splice","pieces","left","right","i","length","$64eedf2b3cf5e1b22733aea702adb765$var$getDataFromUrl","then","response","trigger","Gadget","prototype","document","body","htmlCode","detail","result","alert","on","expanded","collapsed","configuration","css","font-size","font_size","notification"],"version":3,"file":"setup_gadget.9eae3ded.js.map"}