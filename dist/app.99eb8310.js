/*!
* mustache.js - Logic-less {{mustache}} templates with JavaScript
* http://github.com/janl/mustache.js
*/
var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var l=/\S/;function o(e){return!function(e,t){return i.call(e,t)}(l,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,c=/\s+/,d=/\s*=/,h=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var t,a,i,l=this.cache;if(l.hasOwnProperty(e))t=l[e];else{for(var o,s,u,c=this,d=!1;c;){if(e.indexOf(".")>0)for(o=c.view,s=e.split("."),u=0;null!=o&&u<s.length;)u===s.length-1&&(d=r(o,s[u])||(a=o,i=s[u],null!=a&&"object"!=typeof a&&a.hasOwnProperty&&a.hasOwnProperty(i))),o=o[s[u++]];else o=c.view[e],d=r(c.view,e);if(d){t=o;break}c=c.parent}l[e]=t}return n(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(e,n){var r=this.templateCache,i=e+":"+(n||v.tags).join(":"),l=void 0!==r,s=l?r.get(i):void 0;return null==s&&(s=function(e,n){if(!e)return[];var r,i,l,s=!1,f=[],g=[],b=[],y=!1,w=!1,T="",C=0;function k(){if(y&&!w)for(;b.length;)delete g[b.pop()];else b=[];y=!1,w=!1}function x(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(a(e[0])+"\\s*"),i=new RegExp("\\s*"+a(e[1])),l=new RegExp("\\s*"+a("}"+e[1]))}x(n||v.tags);for(var H,I,E,M,B,$,V=new m(e);!V.eos();){if(H=V.pos,E=V.scanUntil(r))for(var L=0,S=E.length;L<S;++L)o(M=E.charAt(L))?(b.push(g.length),T+=M):(w=!0,s=!0,T+=" "),g.push(["text",M,H,H+1]),H+=1,"\n"===M&&(k(),T="",C=0,s=!1);if(!V.scan(r))break;if(y=!0,I=V.scan(p)||"name",V.scan(u),"="===I?(E=V.scanUntil(d),V.scan(d),V.scanUntil(i)):"{"===I?(E=V.scanUntil(l),V.scan(h),V.scanUntil(i),I="&"):E=V.scanUntil(i),!V.scan(i))throw new Error("Unclosed tag at "+V.pos);if(B=">"==I?[I,E,H,V.pos,T,C,s]:[I,E,H,V.pos],C++,g.push(B),"#"===I||"^"===I)f.push(B);else if("/"===I){if(!($=f.pop()))throw new Error('Unopened section "'+E+'" at '+H);if($[1]!==E)throw new Error('Unclosed section "'+$[1]+'" at '+H)}else"name"===I||"{"===I||"&"===I?w=!0:"="===I&&x(E)}if(k(),$=f.pop())throw new Error('Unclosed section "'+$[1]+'" at '+V.pos);return function(e){for(var t,n=[],a=n,r=[],i=0,l=e.length;i<l;++i)switch((t=e[i])[0]){case"#":case"^":a.push(t),r.push(t),a=t[4]=[];break;case"/":r.pop()[5]=t[2],a=r.length>0?r[r.length-1][4]:n;break;default:a.push(t)}return n}(function(e){for(var t,n,a=[],r=0,i=e.length;r<i;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}(g))}(e,n),l&&r.set(i,s)),s},g.prototype.render=function(e,t,n,a){var r=this.getConfigTags(a),i=this.parse(e,r),l=t instanceof f?t:new f(t,void 0);return this.renderTokens(i,l,n,e,a)},g.prototype.renderTokens=function(e,t,n,a,r){for(var i,l,o,s="",u=0,c=e.length;u<c;++u)o=void 0,"#"===(l=(i=e[u])[0])?o=this.renderSection(i,t,n,a,r):"^"===l?o=this.renderInverted(i,t,n,a,r):">"===l?o=this.renderPartial(i,t,n,r):"&"===l?o=this.unescapedValue(i,t):"name"===l?o=this.escapedValue(i,t,r):"text"===l&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},g.prototype.renderSection=function(e,a,r,i,l){var o=this,s="",u=a.lookup(e[1]);if(u){if(t(u))for(var c=0,d=u.length;c<d;++c)s+=this.renderTokens(e[4],a.push(u[c]),r,i,l);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],a.push(u),r,i,l);else if(n(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(a.view,i.slice(e[3],e[5]),(function(e){return o.render(e,a,r,l)})))&&(s+=u)}else s+=this.renderTokens(e[4],a,r,i,l);return s}},g.prototype.renderInverted=function(e,n,a,r,i){var l=n.lookup(e[1]);if(!l||t(l)&&0===l.length)return this.renderTokens(e[4],n,a,r,i)},g.prototype.indentPartial=function(e,t,n){for(var a=t.replace(/[^ \t]/g,""),r=e.split("\n"),i=0;i<r.length;i++)r[i].length&&(i>0||!n)&&(r[i]=a+r[i]);return r.join("\n")},g.prototype.renderPartial=function(e,t,a,r){if(a){var i=this.getConfigTags(r),l=n(a)?a(e[1]):a[e[1]];if(null!=l){var o=e[6],s=e[5],u=e[4],c=l;0==s&&u&&(c=this.indentPartial(l,u,o));var d=this.parse(c,i);return this.renderTokens(d,t,a,c,r)}}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(e,t,n){var a=this.getConfigEscape(n)||v.escape,r=t.lookup(e[1]);if(null!=r)return"number"==typeof r&&a===v.escape?String(r):a(r)},g.prototype.rawValue=function(e){return e[1]},g.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},g.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){b.templateCache=e},get templateCache(){return b.templateCache}},b=new g;v.clearCache=function(){return b.clearCache()},v.parse=function(e,t){return b.parse(e,t)},v.render=function(e,n,a,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return b.render(e,n,a,r)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},v.Scanner=m,v.Context=f,v.Writer=g;const y={};y.get={innerHTML:e=>e.innerHTML,textContent:e=>e.textContent,value:e=>e.value,template:e=>{let t=`[data-for='${e.id||e.name}']`,n=document.querySelector(t).innerHTML;return v.render(n,pageContext)}},y.set={innerHTML:(e,t)=>(e.innerHTML=t,`target HTML is now ${t}`),textContent:(e,t)=>(e.textContent=t,`target text is now ${t}`),value:(e,t)=>(e.value=t,`target value is now ${t}`)},y.add={innerHTML:(e,t)=>{e.innerHTML=e.innerHTML+t},textContent:(e,t)=>{e.textContent=e.textContent+t},value:(e,t)=>{e.value=e.value+t}};const w=()=>{var e;null===(e=document.getElementById("ModalWrapper"))||void 0===e||e.remove()};y.modal=e=>{T.click.closeModal=T.click.closeModal||w;let t=`<div data-click="closeModal" id="ModalContent">${e}</div>`,n=document.createElement("div");n.id="ModalWrapper",n.dataset.click="closeModal",n.innerHTML=t,document.body.appendChild(n)},y.alert=e=>{let t=`<h1>Alert</h1><hr><div id="Alert">${e}<hr><button data-click="closeModal">Okay</button></div>`;y.modal(t)},y.warning=e=>{let t=`<h1>Warning</h1><hr><div id="Warning">${e}<hr><button data-click="closeModal">Okay</button></div>`;return y.modal(t),!1},y.confirm=(e,t,n)=>{let a=`<h1>Confirm</h1><hr>\n                    <div id="Confirm">${e}<hr>\n                    <button data-click="confirmYes">Yes</button>\n                    <button data-click="confirmNo">No</button>\n                    </div>`;T.click.confirmYes=()=>{w(),null==t||t()},T.click.confirmNo=()=>{w(),null==n||n()},y.modal(a)},y.textInput=e=>{T.click.processTextInput=t=>{let n=document.getElementById("TextInput").value;w(),e.call(t.target,n)},y.modal('<h2>Input Text</h2>\n                    <textarea id="TextInput" class="modal-input">Copy/Paste Here</textarea>\n                    <hr>\n                    <button data-click="processTextInput">Continue</button>\n                    ')};const T={click:{},change:{},keyup:{},actions:{}};T.click.addToPage=()=>{if(!mainTable.isValid)return y.warning(mainTable.validationError),!1;let e={detail:mainTable.htmlOutput};const t=new CustomEvent("gadget_insert",e);document.body.dispatchEvent(t)},T.actions.importHtml=e=>{if(!mainTable.import(e))return y.warning("Could Not Find Table in Imported HTML"),!1;mainTable.updateInterface()},T.click.textInput=e=>{let t=e.dataset.action;y.textInput((function(e){var n,a;null===(n=(a=T.actions)[t])||void 0===n||n.call(a,e)}))},T.click.resetTable=()=>{y.confirm("Are you sure you want to reset the table? All data will be lost.",(()=>{mainTable.fullReset()}),null)},T.click.addColumn=e=>{mainTable.columns>=10&&y.alert("Having more than 10 columns is not recommended.");let t=e.dataset.column??null;t=null!=t?parseInt(t)+1:null,mainTable.addColumn(t),mainTable.updateInterface(["Header","Body"])},T.click.addRow=e=>{mainTable.rows>=30&&y.alert("Tables this large can be difficult to read. Consider using multiple tables instead.");let t=e.dataset.row??null;t=null!=t?parseInt(t)+1:null,mainTable.addRow(t),mainTable.updateInterface(["Body"])},T.click.removeColumn=e=>{if(1===mainTable.columns)return y.warning("You must have at least 1 column.");mainTable.removeColumn(e.dataset.column),mainTable.updateInterface(["Header","Body"])},T.click.removeRow=e=>{if(1===mainTable.rows)return y.warning("You must have at least 1 row.");mainTable.removeRow(e.dataset.row),mainTable.updateInterface(["Body"])},T.change.syncHeading=e=>{let t=e.dataset.location.split(",");mainTable.updateTableHead(t[1],e.value),mainTable.updateInterface(["Header"])},T.change.syncValue=e=>{let t=e.dataset.location.split(",");mainTable.updateTableBody(t[0],t[1],e.value)},T.keyup.syncCaption=e=>{mainTable.caption=e.value,mainTable.updateInterface(["Caption"])},T.click.getHtmlCode=()=>{let e=`<textarea class='embed'>${mainTable.htmlOutput}</textarea>`;y.modal(e)},T.click.previewTable=()=>{y.modal(mainTable.htmlOutput)},T.keyup.syncDefaultValue=e=>{mainTable.defaultNewValue=e.value};class C{constructor(e){this.name=e,this.start=performance.now(),this.result=0}stop(){return this.result=performance.now()-this.start,this}get detailedResults(){return`Task "${this.name}" executed in ${this.result} ms.`}}export const pageContext={};export const mainTable=new class{constructor(e){this.tableId=e,this.caption="Table Caption",this.tableHeading=["Heading"],this.tableBody=[["Value"]],this.defaultNewValue="New Value",this.templates={}}get isValid(){return!(this.caption.length<=0)||(this.validationError="The caption cannot be blank.",!1)}get element(){return document.getElementById(this.tableId)}get columns(){return this.tableHeading.length}get rows(){return this.tableBody.length}get tdTemplate(){var e;if(this.templates.td)return this.templates.td;let t=`.td[data-template-for="${this.tableId}"]`,n=null===(e=document.querySelector(t))||void 0===e?void 0:e.innerHTML;return this.templates.td=n,n}get thTemplate(){var e;if(this.templates.th)return this.templates.th;let t=`.th[data-template-for="${this.tableId}"]`,n=null===(e=document.querySelector(t))||void 0===e?void 0:e.innerHTML;return this.templates.th=n,n}get rowTemplate(){var e;if(this.templates.row)return this.templates.row;let t=`.row[data-template-for="${this.tableId}"]`,n=null===(e=document.querySelector(t))||void 0===e?void 0:e.innerHTML;return this.templates.row=n,n}import(e){var t,n,a;let r=document.createElement("div");if(document.body.appendChild(r),r.style.visibility="hidden",r.innerHTML=e,((null===(t=r.querySelector("table"))||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)??0)<=0)return!1;let i=(null===(a=r.querySelector("caption"))||void 0===a?void 0:a.textContent)??"No Caption",l=Array.from(r.querySelectorAll("th")).map((e=>e.textContent)),o=0,s=Array.from(r.querySelectorAll("tr")).map(((e,t)=>{let n=Array.from(e.querySelectorAll("td")).map((e=>e.textContent));return o=o<n.length?n.length:o,n})).filter((e=>e.length>0));if(o=o<l.length?l.length:o,s.forEach((e=>{let t=o-e.length,n=0;for(;n<t;n++)e.push(this.defaultNewValue)})),l.length<o){let e=o-l.length,t=0;for(;t<e;t++)l.push("Heading")}return r.parentElement.removeChild(r),this.caption=i,this.tableHeading=l,this.tableBody=s,!0}fullReset(){this.caption="Table Caption",this.tableHeading=["Heading"],this.tableBody=[["Value"]],this.defaultNewValue="New Value",this.updateInterface()}addColumn(e){e=e??this.tableHeading.length,this.tableHeading.splice(e,0,"New Heading"),this.tableBody.forEach(((t,n)=>{t.splice(e,0,this.defaultNewValue)}))}addRow(e){e=e??this.tableBody.length;let t=[];this.tableHeading.forEach(((e,n)=>{t.push(this.defaultNewValue)})),this.tableBody.splice(e,0,t)}removeColumn(e){this.tableHeading.splice(e,1),this.tableBody.forEach(((t,n)=>{t.splice(e,1)}))}removeRow(e){this.tableBody.splice(e,1)}get htmlOutput(){let e=this.tableHeading.map((e=>`\n           <th>${e}</th>`)).join(" "),t="";return this.tableBody.forEach((e=>{t+="\n      <tr>"+e.map((e=>`\n         <td>${e}</td>`)).join(" ")+"\n     </tr>"})),` \n<table>\n    <caption>${this.caption}</caption>\n    <thead>\n        <tr>${e}\n        </tr>\n    </thead>\n    <tbody>${t}\n    </tbody>\n</table>`}_calcNumber(e,t){return t+this.columns*e+1}_uiCaption(){this.element.querySelector("caption").textContent=this.caption}_uiHeader(){let e=this._calcNumber.bind(this),t=this.tableHeading.map(((t,n)=>{let a={column:n,number:e(0,n),row:0,value:t,type:"Heading",first:0===n};return v.render(this.thTemplate,a)})).join("");this.element.querySelector("thead").innerHTML=t}_uiBody(){let e="",t=this.columns,n=this._calcNumber.bind(this);this.tableBody.forEach(((a,r)=>{let i={rowContent:a.map(((e,t)=>{let a={column:t,row:r,number:n(r,t),value:e,type:"Value"};return a.first=0==t,v.render(this.tdTemplate,a)})).join(""),row:r,nextRow:r+1,columns:t};e+=v.render(this.rowTemplate,i)})),this.element.querySelector("tbody").innerHTML=e}updateInterface(e,t){let n=new C("Update UI"),a=0,r=(e=e??["Caption","Header","Body"]).length;for(;a<r;a++){var i;let t=`_ui${null===(i=e)||void 0===i?void 0:i[a]}`;(null==this?void 0:this[t]).bind(this).call()}console.log(n.stop().detailedResults),n.result>50&&y.alert("The performance of this application is lower than normal. This table may be too large.")}updateTableHead(e,t){var n;null!==(n=this.tableHeading)&&void 0!==n&&n[e]&&(this.tableHeading[e]=t)}updateTableBody(e,t,n){var a,r;null!==(a=this.tableBody)&&void 0!==a&&null!==(r=a[e])&&void 0!==r&&r[t]&&(this.tableBody[e][t]=n)}}("MainTable");window._mainTable=mainTable,document.body.addEventListener("keyup",(e=>{var t,n;let a=e.target;null===(t=(n=T.keyup)[a.dataset.keyup])||void 0===t||t.call(n,a,e)})),document.body.addEventListener("change",(e=>{var t,n;let a=e.target;null===(t=(n=T.change)[a.dataset.change])||void 0===t||t.call(n,a,e)})),document.body.addEventListener("click",(e=>{var t,n;let a=e.target;null===(t=(n=T.click)[a.dataset.click])||void 0===t||t.call(n,a,e)})),document.body.onload=()=>{mainTable.updateInterface()},window._debug={context:pageContext,mainTable:mainTable,events:T,ou:!0};
//# sourceMappingURL=app.99eb8310.js.map
