<!DOCTYPE html>
<html>

<head>
    <!-- This title is not used. -->
    <title>Gadget Starter</title>

    <!-- Use Bootstrap to match the look of OU Campus. -->
    <link rel="stylesheet" href="./scripts/libs/bootstrap.min.css">
    <link rel="stylesheet" href="./css/tablegen.css">

    <style type="text/css">
        body {
            margin: 10px;
            background-color: transparent;
        }

        script {
            display: none !important;
        }
    </style>

    <!-- jQuery IS REQUIRED for gadgetlib.js to work. -->
    <script type="text/javascript" src="./scripts/libs/jquery-2.1.3.min.js"></script>

    <!--
        gadgetlib.js is a library of basic functions that gadgets can use. It creates a global
        `gadget` object that has a few useful methods. (See comments in gadgetlib.js.)
    -->
    <script type="text/javascript" src="./scripts/libs/gadgetlib.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            /*
                First, call `gadget.ready()` to make sure the gadget has obtained an API token
                to use for making OU Campus API calls. If your gadget will not make any API calls,
                you can dispense with this method. This asynchronous method returns a jQuery
                Promise object.

                Then, call `gadget.fetch()` to get the gadget's config data from the system. This
                method, which also returns a jQuery Promise object, uses the API, which is why it
                needs to follow the call to `gadget.ready()`.

                If you don't need the config data, you don't need to call gadget.fetch().
            */
            gadget.ready().then(gadget.fetch).then(function () {
                $('#main').css({ 'font-size': gadget.getConfig('font_size') });
            });
        });

        $(gadget).on({
            'expanded': function (evt) {
                // This event is triggered when the user expands (makes visible) a sidebar gadget.
                console.log('Gadget expanded.');
            },
            'collapsed': function (evt) {
                // This event is triggered when the user collapses (hides) a sidebar gadget.
                console.log('Gadget collapsed.');
            },
            'configuration': function (evt, config) {
                // If the user changes the gadget's configuration through the configuration modal,
                // the gadget will hear about it and get the new config in the data argument here.
                console.log('New config:', config);
                $('#main').css({ 'font-size': config.font_size });
            },
            'notification': function (evt, notification) {
                // If the gadget's config.xml contains a "notification" entry, any notifications
                // of the specified type(s) generated by OU Campus will trigger 'notification'
                // events that can be handled here.
                console.log('Notification received:', notification);
            }
        });

    </script>
</head>

<body>
    <div id="main">
        <div id="PageBody">
            <div id="AppWrapper">
                <h1>TableGen - WCAG Table Creation Tool</h1>
                <p>Use this app to create WCAG/Section 508 Compliant HTML Tables</p>
                <section id="TableHeadSettings">
                    <h2>Table Head</h2>
                    <p>
                        <label for="TableCaptionControl">Caption:</label>
                        <input type="text" id="TableCaptionControl" maxlength="200" data-keyup="syncCaption"
                            value="Table Caption">
                    </p>
                    <p>

                        <label for="TableDefaultValueControl">Default Cell Value:</label>
                        <input type="text" id="TableDefaultValueControl" maxlength="200" data-keyup="syncDefaultValue"
                            value="New Value">
                    </p>
                    <hr>
                </section>
                <section id="TableBodySettings">
                    <h2>Output Table</h2>
                    <button type="button" id="InsertRowButton" data-click="addRow">Add Row at End</button>
                    <button type="button" id="InsertColumnButton" data-click="addColumn">Add Column at End</button>
                    <button type="button" id="GetHtmlButton" data-click="getHtmlCode">Get HTML Code</button>
                    <button type="button" id="GetHtmlButton" data-click="previewTable">Preview Table</button>
                    <button type="button" id="GetHtmlButton" data-click="textInput" data-action="importHtml">Import
                        Table</button>
                    <hr>
                    <div id="MainTable">
                        <table id="UI_TABLE">
                            <caption>&nbsp;</caption>
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                </section>
            </div>
            <script type="template" id="RowTemplate" class="row" data-template-for="MainTable">
                <tr>
                    {{{rowContent}}}
                </tr>
                <tr class="ui-add-row">
                    <td colspan="{{columns}}" class="button-wrapper">
                        <button title="Add Row at {{row}}" data-row="{{row}}" class="add-row" data-click="addRow">Insert Row After {{nextRow}}</button>
                    </td>
                </tr>
            </script>
            <script type="template" id="ThTemplate" class="th" data-template-for="MainTable">
                {{#first}}
                    <th class="button-wrapper">
                        <button title="Reset Table (All data will be lost.)" class="reset-table" data-click="resetTable">!R!</button>
                    </th>
                {{/first}}
                <th data-index="{{column}}">
                    <button title="Delete Column {{column}}" data-column="{{column}}" class="delete-column" data-click="removeColumn">-</button>
                    <input data-location="{{row}},{{column}}" data-change="sync{{type}}" type="text" size="10" value="{{value}}">
                    <button title="Add Column After Column {{column}}" data-column="{{column}}" class="add-column" data-click="addColumn">+</button>
                </th>
            </script>
            <script type="template" id="TdTemplate" class="td" data-template-for="MainTable">
                {{#first}}
                <td rowspan="2" class="button-wrapper delete-row">
                    <button title="Delete Row at {{row}}" data-row="{{row}}" class="delete-row" data-click="removeRow">--</button>
                </td>    
                {{/first}}
                <td data-index="{{column}}" class="{{#first}}first{{/first}}">           
                    <input data-location="{{row}},{{column}}" data-change="sync{{type}}" type="text" size="10" value="{{value}}">
                </td>
            </script>
            <!-- <script>var exports = window.exports || {};</script> -->
            <script type="module" src="scripts/app.js"></script>
            <!-- <script src="./js/index.js"></script> -->
        </div>

    </div>
    <!--
        The following hidden div is only needed if you'll be editing your gadget in
        OU Campus's source code editor. OU Campus automatically adds a DirectEdit link
        to HTML files that you edit in OU Campus. This div hides the DirectEdit link.
    -->
    <div style="display:none">
        <!-- ouc:ob -->
        <!-- /ouc:ob -->
    </div>
</body>

</html>