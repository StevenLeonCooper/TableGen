/*!
* mustache.js - Logic-less {{mustache}} templates with JavaScript
* http://github.com/janl/mustache.js
*/
var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var a=/\S/;function s(e){return!function(e,t){return i.call(e,t)}(a,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var l=/\s*/,u=/\s+/,h=/\s*=/,p=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,r,i,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,c,l,u=this,h=!1;u;){if(e.indexOf(".")>0)for(s=u.view,c=e.split("."),l=0;null!=s&&l<c.length;)l===c.length-1&&(h=o(s,c[l])||(r=s,i=c[l],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(i))),s=s[c[l++]];else s=u.view[e],h=o(u.view,e);if(h){t=s;break}u=u.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},v.prototype.parse=function(e,n){var o=this.templateCache,i=e+":"+(n||m.tags).join(":"),a=void 0!==o,c=a?o.get(i):void 0;return null==c&&(c=function(e,n){if(!e)return[];var o,i,a,c=!1,g=[],v=[],y=[],w=!1,T=!1,C="",x=0;function k(){if(w&&!T)for(;y.length;)delete v[y.pop()];else y=[];w=!1,T=!1}function b(e){if("string"==typeof e&&(e=e.split(u,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),i=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}b(n||m.tags);for(var E,L,S,H,M,j,q=new f(e);!q.eos();){if(E=q.pos,S=q.scanUntil(o))for(var U=0,D=S.length;U<D;++U)s(H=S.charAt(U))?(y.push(v.length),C+=H):(T=!0,c=!0,C+=" "),v.push(["text",H,E,E+1]),E+=1,"\n"===H&&(k(),C="",x=0,c=!1);if(!q.scan(o))break;if(w=!0,L=q.scan(d)||"name",q.scan(l),"="===L?(S=q.scanUntil(h),q.scan(h),q.scanUntil(i)):"{"===L?(S=q.scanUntil(a),q.scan(p),q.scanUntil(i),L="&"):S=q.scanUntil(i),!q.scan(i))throw new Error("Unclosed tag at "+q.pos);if(M=">"==L?[L,S,E,q.pos,C,x,c]:[L,S,E,q.pos],x++,v.push(M),"#"===L||"^"===L)g.push(M);else if("/"===L){if(!(j=g.pop()))throw new Error('Unopened section "'+S+'" at '+E);if(j[1]!==S)throw new Error('Unclosed section "'+j[1]+'" at '+E)}else"name"===L||"{"===L||"&"===L?T=!0:"="===L&&b(S)}if(k(),j=g.pop())throw new Error('Unclosed section "'+j[1]+'" at '+q.pos);return function(e){for(var t,n=[],r=n,o=[],i=0,a=e.length;i<a;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":o.pop()[5]=t[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(v))}(e,n),a&&o.set(i,c)),c},v.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),i=this.parse(e,o),a=t instanceof g?t:new g(t,void 0);return this.renderTokens(i,a,n,e,r)},v.prototype.renderTokens=function(e,t,n,r,o){for(var i,a,s,c="",l=0,u=e.length;l<u;++l)s=void 0,"#"===(a=(i=e[l])[0])?s=this.renderSection(i,t,n,r,o):"^"===a?s=this.renderInverted(i,t,n,r,o):">"===a?s=this.renderPartial(i,t,n,o):"&"===a?s=this.unescapedValue(i,t):"name"===a?s=this.escapedValue(i,t,o):"text"===a&&(s=this.rawValue(i)),void 0!==s&&(c+=s);return c},v.prototype.renderSection=function(e,r,o,i,a){var s=this,c="",l=r.lookup(e[1]);if(l){if(t(l))for(var u=0,h=l.length;u<h;++u)c+=this.renderTokens(e[4],r.push(l[u]),o,i,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],r.push(l),o,i,a);else if(n(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(r.view,i.slice(e[3],e[5]),(function(e){return s.render(e,r,o,a)})))&&(c+=l)}else c+=this.renderTokens(e[4],r,o,i,a);return c}},v.prototype.renderInverted=function(e,n,r,o,i){var a=n.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],n,r,o,i)},v.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},v.prototype.renderPartial=function(e,t,r,o){if(r){var i=this.getConfigTags(o),a=n(r)?r(e[1]):r[e[1]];if(null!=a){var s=e[6],c=e[5],l=e[4],u=a;0==c&&l&&(u=this.indentPartial(a,l,s));var h=this.parse(u,i);return this.renderTokens(h,t,r,u,o)}}},v.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},v.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||m.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&r===m.escape?String(o):r(o)},v.prototype.rawValue=function(e){return e[1]},v.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},v.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){y.templateCache=e},get templateCache(){return y.templateCache}},y=new v;m.clearCache=function(){return y.clearCache()},m.parse=function(e,t){return y.parse(e,t)},m.render=function(e,n,r,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return y.render(e,n,r,o)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},m.Scanner=f,m.Context=g,m.Writer=v;const w={set:{},get:{}};w.get={innerHTML:e=>e.innerHTML,textContent:e=>e.textContent,value:e=>e.value,template:e=>{let t=`[data-for='${e.id||e.name}']`,n=document.querySelector(t).innerHTML;return m.render(n,k)}},w.set={innerHTML:(e,t)=>(e.innerHTML=t,`target HTML is now ${t}`),textContent:(e,t)=>(e.textContent=t,`target text is now ${t}`),value:(e,t)=>(e.value=t,`target value is now ${t}`)},w.add={innerHTML:(e,t)=>{e.innerHTML=e.innerHTML+t},textContent:(e,t)=>{e.textContent=e.textContent+t},value:(e,t)=>{e.value=e.value+t}};const T={};class C{constructor(e,t){let n=t.split(" of ").join(",").split(" with ").join(",").split(": ").join(",").split(",");this.method=n[0],this.targetData=n[1],this.targetSelector=n[2].replace("{","").replace("}",""),this.sourceData=n[3],this.source=e,this.history=[],T[this.source.id||this.source.name]=this}replace=()=>{let e=document.querySelector(this.targetSelector),t=w.get[this.sourceData]?.(this.source),n=w.set[this.targetData]?.(e,t);this.history.push(n)};insert=()=>{let e=document.querySelector(this.targetSelector),t=w.get[this.sourceData]?.(this.source),n=w.add[this.targetData]?.(e,t);this.history.push(n)};update=()=>{this[this.method]?.()}}const x={click:{},change:{}};x.click.addRow=(e,t)=>{if(0==k.rowTemplate.length){let e=document.querySelector("#ExtraColumnTemplate").innerHTML;k.rowTemplate.push(e)}outputTemplate=k.rowTemplate.join("\x3c!-- | --\x3e")},x.click.addColumn=(e,t)=>{let n=document.querySelector("#ExtraColumnTemplate").innerHTML,r=n.replace("td>","th>"),o=document.querySelector("#out_thead tr"),i=document.querySelectorAll("#out_tbody tr");o.innerHTML=o.innerHTML+r,i.forEach((e=>{e.innerHTML=e.innerHTML+n})),k.columnCount++,k.updateRows(n),console.log(k)},x.click.addTableData=(e,t)=>{let n=document.querySelector("#ExtraColumnTemplate").content.cloneNode(!0),r=e.parentNode.parentNode;r.appendChild(n);let o=document.querySelector("#out_thead tr"),i=o.children.length;r.children.length>i&&(o.innerHTML=o.innerHTML+'<th><button data-click="deleteColumn" title="Delete">-</button>Heading</th>')},x.click.deleteColumn=(e,t)=>{e.parentNode.parentNode.removeChild(e.parentNode)};const k=new class{constructor(){this.columnCount=1,this.rowCount=1,this.headerTemplate="",this.rowTemplate="",this.columns=[],this.rows=[]}updateColumns=e=>{this.columns.push(e)};updateRows=e=>{this.rows.push(e),this.rowTemplate=this.rows.join("\x3c!--|--\x3e")}};if(exports.contexts=k,0==k.rowTemplate.length){let e=document.querySelector("#ExtraColumnTemplate").innerHTML;k.updateRows(e),console.log(k)}function b(e,t){let n=e.dataset[t];return!!n&&(!!n.includes(":")&&void(T[e.id||e.name]??new C(e,n)).update())}document.body.addEventListener("keyup",(e=>{b(e.target,"keyup")})),document.body.addEventListener("change",(e=>{let t=e.target;x.change[t.dataset.change]?.(t,e),b(t,"change")})),document.body.addEventListener("click",(e=>{let t=e.target;x.click[t.dataset.click]?.(t,e),b(t,"click")}));
//# sourceMappingURL=index.js.map
